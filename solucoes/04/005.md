## Problema

5 - Cria um programa que apresente as seguintes estatísticas sobre um projeto
em C#:

1.  Número de linhas de código
2.  Número de linhas em branco (apenas _whitespace_)
3.  Número de linhas que são comentários (i.e. linhas que começam com `//`,
    ignorando comentários do estilo `/* ... */`)

Para o efeito deves criar três métodos de extensão apropriados com os nomes
`IsLineOfCode()`, `IsBlank()` e `IsComment()`, que devolvem um booleano
indicando se a linha (_string_) é do tipo em questão.

O programa deve receber como argumento da linha de comando uma pasta ou um
nome de ficheiro. Se for indicada uma pasta, o programa deve indicar a
estatística global para todos os ficheiros `.cs` na pasta e respetivas
sub-pastas. Caso seja indicado um ficheiro, o programa deve certificar-se que o
mesmo tem extensão `.cs` e mostrar as estatísticas apenas para esse ficheiro.

Este programa deve ser estruturado de acordo com as melhores práticas de
tratamento de exceções, design de classes e _design patterns_.

Apresenta também o diagrama UML simples (sem campos e métodos) da solução.


## Soluções

### Solução 1

Classe Program:

```cs
using System;
using System.IO;

namespace _05
{
    class Program
    {
        static void Main(string[] args)
        {
            string[] lines;
            int linesCount = 0;
            int linesWhiteSpace = 0;
            int linesComment = 0;

            // Verifica se o primeiro argumento é um pasta
            if (Directory.Exists(args[0]))
            {
                // Se for uma pasta percorre todos os ficheiros nela contidos
                foreach (string file in Directory.EnumerateFiles(args[0], "*.cs"))
                {
                    lines = File.ReadAllLines(file);
                    linesCount += lines.Length;

                    // Percorre as linhas todas e incrementa o total
                    foreach(string line in lines)
                    {
                        if (line.IsBlank())
                            linesWhiteSpace++;
                        if (line.IsComment())
                            linesComment++;
                    }
                    
                }
                Console.WriteLine("Número de linhas nos ficheiros: {0}", linesCount);
                Console.WriteLine("Número de linhas vazias nos ficheiros: {0}", linesWhiteSpace);
                Console.WriteLine("Número de linhas comentadas nos ficheiros: {0}", linesComment);
            }

            // Verifica se o primeiro argumento é um ficheiro .cs
            else if (File.Exists(args[0]))
            {
                lines = File.ReadAllLines(args[0]);
                linesCount = lines.Length;

                // Percorre as linhas todas e incrementa o total
                foreach (string line in lines)
                {
                    if (line.IsBlank())
                        linesWhiteSpace++;
                    if (line.IsComment())
                        linesComment++;
                }
                Console.WriteLine("Número de linhas no ficheiro: {0}", linesCount);
                Console.WriteLine("Número de linhas vazias nos ficheiros: {0}", linesWhiteSpace);
                Console.WriteLine("Número de linhas comentadas nos ficheiros: {0}", linesComment);
            }

            // Se não for nem um ficheiro ou pasta sai do programa
            else
            {
                Console.WriteLine("Program only accepts a folder or a file.");
                Environment.Exit(1);
            }
        }
    }
}
```

Classe StringExtensions:

```cs
namespace _05
{
    public static class StringExtensions
    {
        // Verifica se há um linha no ficheiro
        public static bool IsLineOfCode(this string s)
        {
            if (s.Length > 0)
                return true;

            return false;
        }

        // Verifica se há uma linha vazia
        public static bool IsBlank(this string s)
        {
            if (string.IsNullOrWhiteSpace(s))
                return true;

            return false;
        }

        // Verifica se há um comentário na linha
        public static bool IsComment(this string s)
        {
            if (s.Contains("//"))
                return true;

            return false;
        }
    }
}
```

UML Simples:

![UML005](05_UML)

*Por [Ianis Arquissandas](https://github.com/Insoel)*