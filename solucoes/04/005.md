## Problema

5 - Cria um programa que apresente as seguintes estatísticas sobre um projeto
em C#:

1.  Número de linhas de código
2.  Número de linhas em branco (apenas _whitespace_)
3.  Número de linhas que são comentários (i.e. linhas que começam com `//`,
    ignorando comentários do estilo `/* ... */`)

Para o efeito deves criar três métodos de extensão apropriados com os nomes
`IsLineOfCode()`, `IsBlank()` e `IsComment()`, que devolvem um booleano
indicando se a linha (_string_) é do tipo em questão.

O programa deve receber como argumento da linha de comando uma pasta ou um
nome de ficheiro. Se for indicada uma pasta, o programa deve indicar a
estatística global para todos os ficheiros `.cs` na pasta e respetivas
sub-pastas. Caso seja indicado um ficheiro, o programa deve certificar-se que o
mesmo tem extensão `.cs` e mostrar as estatísticas apenas para esse ficheiro.

Este programa deve ser estruturado de acordo com as melhores práticas de
tratamento de exceções, design de classes e _design patterns_.

Apresenta também o diagrama UML simples (sem campos e métodos) da solução.


## Soluções

### Solução 1

Classe CodeReader:

```cs
using System;
using System.IO;

namespace _05
{
    public class CodeReader
    {
        string[] lines;
        int linesCount = 0;
        int linesCode = 0;
        int linesWhiteSpace = 0;
        int linesComment = 0;

        // Verifica se no caminho introduzido está uma pasta ou ficheiro.

        public void ReadPath(string path)
        {
            if (Directory.Exists(path))
            {
                FolderReader(path);
            }
            else if (File.Exists(path))
            {
                FileReader(path);
            }
            else
            {
                Console.WriteLine("Não inseriu um ficheiro ou pasta como " +
                    "argumento. \n");
                Environment.Exit(1);
            }

            Console.WriteLine($"Número de linhas: {linesCount}");
            Console.WriteLine($"Número de linhas de código: {linesCode}");
            Console.WriteLine($"Número de linhas vazias: {linesWhiteSpace}");
            Console.WriteLine($"Número de linhas comentadas: {linesComment}");
        }

        // Verifica a pasta no caminho existente e todos os seus conteúdos.

        public void FolderReader(string path)
        {

            // Verifica todos os ficheiros no caminho.

            string[] fileEntries = Directory.GetFiles(path);
            foreach (string fileName in fileEntries)
                FileReader(fileName);



            // Recursão que verifica todas as pastas dentro do caminho.

            string[] subDiretorios = Directory.GetDirectories(path);
            foreach (string subDiretorio in subDiretorios)
                FolderReader(subDiretorio);

        }

        // Verifica todas as linhas e incrementa consoante o tipo de linha.

        public void FileReader(string path)
        {
            lines = File.ReadAllLines(path);
            linesCount += lines.Length;
            foreach (string line in lines)
            {
                if (line.IsBlank())
                {
                    linesWhiteSpace++;
                }
                else
                {
                    if (line.IsComment())
                        linesComment++;
                    else if (line.IsLineOfCode())
                        linesCode++;
                }

            }
        }
    }
}

```

Classe StringExtensions:

```cs
namespace _05
{
    public static class StringExtensions
    {
        // Verifica se há uma linha no ficheiro
        public static bool IsLineOfCode(this string s)
        {
            s = s.TrimStart(' ');
            if (s.Length > 0 && !string.IsNullOrWhiteSpace(s) && !s.StartsWith("//"))
                return true;
            return false;
        }

        // Verifica se há uma linha vazia
        public static bool IsBlank(this string s)
        {
            return string.IsNullOrWhiteSpace(s);
        }

        // Verifica se há um comentário na linha
        public static bool IsComment(this string s)
        {
            s = s.TrimStart(' ');
            if (s.StartsWith("//"))
                return true;
            return false;
        }
    }
}
```

Classe Program:

```cs
using System;

namespace _05
{
    class Program
    {
        static void Main(string[] args)
        {
            Program prog = new Program();
            prog.StartProgram(args);
        }

        public void StartProgram(string[] args)
        {
            CodeReader cr = new CodeReader();
            string path = args[0];
            try
            {
                cr.ReadPath(path);
            }
            catch (Exception e)
            {
                Console.WriteLine("Não inseriu um ficheiro ou pasta como " +
                    "argumento. \n" + e.Message);
            }
        }
    }
}
```

UML Simples:


*Por [Ianis Arquissandas](https://github.com/Insoel)*