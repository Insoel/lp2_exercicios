## Problema

18 - O teu jogo é _shooter_ de sucesso, e a classe base de todas as armas é
`Weapon`, cuja interface está definida da seguinte forma:

```cs
interface IWeapon
{
    // This property is true if weapon is in alternate firing mode, false
    // otherwise
    bool IsAlternate { get; }

    // Reload the weapon
    void Reload();

    // Shoot the weapon, return true if any rounds left to shoot in current
    // firing mode, false otherwise
    bool Shoot();

    // Switch between main and alternate firing modes
    void SwitchFireMode();
}
```

Os teus investidores exigem um DLC que inclua _melee weapons_, ou seja, armas
para combate corpo a corpo. Os investidores tomaram a liberdade de adquirir um
pacote de _assets_ para esse fim, e querem integra-lo no jogo. A interface das
_melee weapons_ é a seguinte:

```cs
interface IMelee
{
    // Attacks return true if they hit opponent
    bool AttackFromAbove();
    bool AttackFromBelow();
    bool AttackFromTheLeft();
    bool AttackFromTheRight();
}
```

Como podes resolver este problema? Escreve código para esse fim e justifica as
tuas opções.

## Solução

Escolhi utilizar uma classe extra chamada `MeleeAdapter` recorrendo ao Adapter pattern.
Por vezes pode ser má ideia mexer em código que já esteja feito, especialmente 
se estivermos a falar de uma classe base de um `Shooter` de sucesso.

Basicamente "transformo" as armas do tipo `IMelee` em `IWeapon` e uso o seu método
`Shoot`, que em vez de disparar como nas `IWeapon`, chama os respetivos métodos de
ataque da arma `IMelee`.

```cs
    public interface IWeapon
    {
        // This property is true if weapon is in alternate firing mode, false
        // otherwise
        bool IsAlternate { get; }

        // Reload the weapon
        void Reload();

        // Shoot the weapon, return true if any rounds left to shoot in current
        // firing mode, false otherwise
        bool Shoot();

        // Switch between main and alternate firing modes
        void SwitchFireMode();
    }
```
```cs
    public interface IMelee
    {
        // Attacks return true if they hit opponent
        bool AttackFromAbove();
        bool AttackFromBelow();
        bool AttackFromTheLeft();
        bool AttackFromTheRight();
    }
```
```cs
    public class MeleeAdapter : IWeapon
    {
        // Private melee weapon instance
        private IMelee melee;

        // Constructor that accepts a melee weapon
        public MeleeAdapter(IMelee melee)
        {
            this.melee = melee;
        }

        // Not implemented in melee weapons
        public bool IsAlternate => throw new NotImplementedException();

        // Not implemented in melee weapons
        public void Reload()
        {
            throw new NotImplementedException();
        }

        // If any of the methods return true, then shoot returns true.
        // Else return false.
        public bool Shoot()
        {
            if (melee.AttackFromAbove() ||
                melee.AttackFromBelow() ||
                melee.AttackFromTheLeft() ||
                melee.AttackFromTheRight())
                return true;
            else
                return false;
        }

        // Not implemented in melee weapons
        public void SwitchFireMode()
        {
            throw new NotImplementedException();
        }
    }
}
```